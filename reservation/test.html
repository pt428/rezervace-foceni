<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Načítání dat</title>
    <script>
        var oldId=-1;
        var newId=-1;
        function fetchData() {
            fetch('checkDBchanges.php')
                .then(response => response.json())
                .then(data => {
                //     const container = document.getElementById('data-container');
                //     container.innerHTML = '';  
                //     data.forEach(item => {
                //         const div = document.createElement('div');
                //         div.textContent = JSON.stringify(item);
                //         container.appendChild(div);
                //         id=item.id;
                //    });
                  // Find the maximum ID
                  if(oldId==-1){
                    oldId= Math.max(...data.map(item => item.id));
                }else{
                        oldId=newId;
                    }
                  newId = Math.max(...data.map(item => item.id));
                if(oldId!=newId){
                    location.reload(true);
                }
                console.log('New ID:', newId);
            console.log('Old ID:', oldId);
                })
                .catch(error => console.error('Chyba:', error));
        }

        setInterval(fetchData, 1000); // Načítání každých 5 sekund
    </script>
</head>
<body>
    <h1>Data z databáze</h1>
    <div id="data-container">
        <!-- Zde se budou zobrazovat data -->
    </div>
</body>
</html>
